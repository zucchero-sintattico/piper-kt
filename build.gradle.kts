/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * To learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.6/samples
 */

plugins {
    alias(libs.plugins.dokka)
    alias(libs.plugins.kotlin)
    alias(libs.plugins.kover)
    alias(libs.plugins.gitSemVer)
    alias(libs.plugins.spotless)
}

gitSemVer {
    // Your configuration
    assignGitSemanticVersion()
}

val notKotlinProjects = listOf(
    "frontend-service",
    "notifications-service",
)

dependencies {
    project.subprojects
        .filter { it.name !in notKotlinProjects }
        .forEach { kover(it) }
}

allprojects {
    group = "piperkt"
}

subprojects {
    if (name !in notKotlinProjects) {
        apply(plugin = "org.jetbrains.dokka")
    }
}

spotless {
    yaml {
        target("**/*.yml", "**/*.yaml")
        targetExclude("**/build/**", "**/node_modules/**")
        prettier()
    }
}
